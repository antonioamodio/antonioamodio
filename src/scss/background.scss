:root{
  --color-bg1:#000; --color-bg2:#000;
  --color1:0,13,255; --color2:0,13,255; --color3:0,13,255; --color4:0,13,255; --color5:0,13,255;
  --color-interactive:0,13,255;
  --circle-size:80%;
  --blending:hard-light;
}

.fixed-background{
  position:fixed; inset:0; z-index:-10;
  overflow:hidden;
  background: linear-gradient(40deg, var(--color-bg1), var(--color-bg2));
  isolation:isolate;
}

.gradient-bg{
  svg{ display:none; }

  .gradients-container{
    /* Effetto gooey su browser OK */
    filter: url('#goo') blur(32px);
    -webkit-filter: url('#goo') blur(32px);
    width:100%; height:100%;
    will-change: transform, filter;
    transform: translateZ(0);
    contain: layout paint;
    pointer-events: none; /* non bloccare input */
    backface-visibility: hidden;
  }

  .g1,.g2,.g3,.g4,.g5,.interactive{
    position:absolute;
    width:var(--circle-size); height:var(--circle-size);
    top:calc(50% - var(--circle-size)/2);
    left:calc(50% - var(--circle-size)/2);
    background: radial-gradient(circle at center, rgba(var(--color1), .8) 0, rgba(var(--color1), 0) 50%) no-repeat;
    mix-blend-mode: var(--blending);
    transform-origin:center;
    animation: moveInCircle 30s linear infinite, moveVertical 20s ease-in-out infinite;
  }

  .g1{ animation: moveVertical 30s ease infinite; }
  .g2{
    background: radial-gradient(circle at center, rgba(var(--color2), .8) 0, rgba(var(--color2), 0) 50%);
    animation: moveInCircle 20s reverse infinite;
    transform-origin: calc(50% - 400px);
  }
  .g3{
    background: radial-gradient(circle at center, rgba(var(--color3), .8) 0, rgba(var(--color3), 0) 50%);
    animation: moveInCircle 40s linear infinite;
    transform-origin: calc(50% + 400px);
    top: calc(50% - var(--circle-size)/2 + 200px);
    left: calc(50% - var(--circle-size)/2 - 500px);
  }
  .g4{
    background: radial-gradient(circle at center, rgba(var(--color4), .8) 0, rgba(var(--color4), 0) 50%);
    animation: moveHorizontal 40s ease infinite;
    transform-origin: calc(50% - 200px);
    opacity:.7;
  }
  .g5{
    background: radial-gradient(circle at center, rgba(var(--color5), .8) 0, rgba(var(--color5), 0) 50%);
    width: calc(var(--circle-size)*2); height: calc(var(--circle-size)*2);
    transform-origin: calc(50% - 800px) calc(50% + 200px);
    animation: moveInCircle 20s ease infinite;
  }
  .interactive{
    background: radial-gradient(circle at center, rgba(var(--color-interactive), .8) 0, rgba(var(--color-interactive), 0) 50%);
    top:-50%; left:-50%; opacity:.7;
  }

  /* -------- Fallback iOS (tutti i browser WebKit su iPhone/iPad) -------- */
  &.ios-fallback{
    .gradients-container{
      filter: blur(24px) saturate(120%) !important;
      -webkit-filter: blur(24px) saturate(120%) !important;
    }
    .g1,.g2,.g3,.g4,.g5,.interactive{
      mix-blend-mode: screen; /* pi√π stabile su iOS */
    }
  }
}

/* Fallback ulteriore per device touch/coarse pointer */
@media (hover:none) and (pointer:coarse){
  .gradient-bg .gradients-container{
    filter: blur(20px) saturate(120%) !important;
    -webkit-filter: blur(20px) saturate(120%) !important;
  }
  .gradient-bg .g1,.gradient-bg .g2,.gradient-bg .g3,.gradient-bg .g4,.gradient-bg .g5,.gradient-bg .interactive{
    mix-blend-mode: screen;
  }
}

/* Rispetta prefers-reduced-motion */
@media (prefers-reduced-motion: reduce){
  .gradient-bg .g1,.gradient-bg .g2,.gradient-bg .g3,.gradient-bg .g4,.gradient-bg .g5,.gradient-bg .interactive{
    animation: none !important;
  }
}

/* Animazioni */
@keyframes moveInCircle{ 0%{transform:rotate(0)} 50%{transform:rotate(180deg)} 100%{transform:rotate(360deg)} }
@keyframes moveVertical{ 0%{transform:translateY(-50%)} 50%{transform:translateY(50%)} 100%{transform:translateY(-50%)} }
@keyframes moveHorizontal{ 0%{transform:translateX(-50%) translateY(-10%)} 50%{transform:translateX(50%) translateY(10%)} 100%{transform:translateX(-50%) translateY(-10%)} }
